apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: open-webui
resources:
  - ../base
labels:
  - pairs:
      env: staging
    includeSelectors: true
configMapGenerator:
  - name: open-webui-conf
    behavior: merge
    literals:
      - WEBUI_URL=https://stg-openai.piny940.com
      - GITHUB_CLIENT_ID=Ov23liC9EWLS8m9q2pi4
      - CORS_ALLOW_ORIGIN=https://stg-openai.piny940.com
patches:
  - patch: |-
      - op: replace
        path: /spec/values/ingress/host
        value: stg-openai.piny940.com
    target:
      kind: HelmRelease
      name: open-webui
